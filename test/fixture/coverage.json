{"/Users/izaakschroeder/Projects/adana-coverage/adana-format-pretty/src/pretty.js":{"source":"import chalk from 'chalk';\nimport { tags, metrics, lines } from 'adana-analyze';\nimport frame from 'babel-code-frame';\nimport Table from 'cli-table';\nimport uniq from 'lodash/fp/uniq';\nimport get from 'lodash/fp/get';\nimport flatMap from 'lodash/fp/flatMap';\nimport flow from 'lodash/fp/flow';\nimport values from 'lodash/fp/values';\nimport zip from 'lodash/fp/zip';\nimport path from 'path';\n\nconst colors = {\n  ignored: chalk.dim,\n  failed: chalk.red,\n  optimal: chalk.green,\n};\n\nfunction missing(entries) {\n  return entries.filter(entry => {\n    return entry.count === 0;\n  });\n}\n\nconst getTags = flow(\n  values,\n  flatMap(get('locations')),\n  flatMap(get('tags')),\n  uniq\n);\n\nexport default function pretty(data) {\n  const wewTags = getTags(data);\n  const table = new Table({\n    head: ['file', 'lines', ...wewTags],\n  });\n  const cwd = process.cwd();\n  const allTags = {};\n  \n  Object.keys(data).forEach((file) => {\n    const coverage = data[file];\n    const t = tags(coverage.locations);\n    const {passed, total} = lines(coverage.locations);\n    const row = [path.relative(cwd, file), `${passed}/${total}`];\n    wewTags.forEach((tag) => {\n      if (t[tag]) {\n        const {passed, total} = metrics(t[tag]);\n        row.push(passed + '/' + total);\n      } else {\n        row.push('N/A');\n      }\n    });\n    table.push(row);\n  });\n  \n  let result = '';\n  Object.keys(data).forEach((file) => {\n    const coverage = data[file];\n    const wew = coverage.source.split('\\n');\n    const l = lines(coverage.locations);\n    result += file + '\\n';\n    l.forEach(({line, passed}) => {\n      if (passed) {        \n        result += (wew[line]) + '\\n';\n      } else {\n        result += (chalk.bgRed(wew[line])) + '\\n';\n      }\n    });\n  });\n\n  return [\n    table.toString(),\n    result,\n  ].join('\\n');\n}\n","path":"/Users/izaakschroeder/Projects/adana-coverage/adana-format-pretty/src/pretty.js","locations":[{"id":0,"loc":{"start":{"line":13,"column":15},"end":{"line":17,"column":1}},"tags":["statement","variable","line"],"count":1},{"id":1,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":20}},"tags":["line"],"count":1},{"id":2,"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":19}},"tags":["line"],"count":1},{"id":3,"loc":{"start":{"line":16,"column":11},"end":{"line":16,"column":22}},"tags":["line"],"count":1},{"id":4,"loc":{"start":{"line":19,"column":0},"end":{"line":23,"column":1}},"tags":["function"],"name":"missing","count":0},{"id":5,"loc":{"start":{"line":20,"column":9},"end":{"line":22,"column":4}},"tags":["line","statement"],"count":0},{"id":6,"loc":{"start":{"line":20,"column":24},"end":{"line":22,"column":3}},"tags":["function"],"name":"@20:24","count":0},{"id":7,"loc":{"start":{"line":21,"column":11},"end":{"line":21,"column":28}},"tags":["line","statement"],"count":0},{"id":8,"loc":{"start":{"line":25,"column":16},"end":{"line":30,"column":1}},"tags":["statement","variable","line"],"count":1},{"id":9,"loc":{"start":{"line":32,"column":15},"end":{"line":75,"column":1}},"tags":["function"],"name":"pretty","count":1},{"id":10,"loc":{"start":{"line":33,"column":18},"end":{"line":33,"column":31}},"tags":["statement","variable","line"],"count":1},{"id":11,"loc":{"start":{"line":34,"column":16},"end":{"line":36,"column":4}},"tags":["statement","variable","line"],"count":1},{"id":12,"loc":{"start":{"line":35,"column":10},"end":{"line":35,"column":39}},"tags":["line"],"count":1},{"id":13,"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":17}},"tags":["line"],"count":1},{"id":14,"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":26}},"tags":["line"],"count":1},{"id":15,"loc":{"start":{"line":37,"column":14},"end":{"line":37,"column":27}},"tags":["statement","variable","line"],"count":1},{"id":16,"loc":{"start":{"line":38,"column":18},"end":{"line":38,"column":20}},"tags":["statement","variable","line"],"count":1},{"id":17,"loc":{"start":{"line":40,"column":2},"end":{"line":54,"column":5}},"tags":["statement","line"],"count":1},{"id":18,"loc":{"start":{"line":40,"column":28},"end":{"line":54,"column":3}},"tags":["function"],"name":"@40:28","count":5},{"id":19,"loc":{"start":{"line":41,"column":21},"end":{"line":41,"column":31}},"tags":["statement","variable","line"],"count":5},{"id":20,"loc":{"start":{"line":42,"column":14},"end":{"line":42,"column":38}},"tags":["statement","variable","line"],"count":5},{"id":21,"loc":{"start":{"line":43,"column":28},"end":{"line":43,"column":53}},"tags":["statement","variable","line"],"count":5},{"id":22,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":64}},"tags":["statement","variable","line"],"count":5},{"id":23,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":41}},"tags":["line"],"count":5},{"id":24,"loc":{"start":{"line":44,"column":43},"end":{"line":44,"column":63}},"tags":["line"],"count":5},{"id":25,"loc":{"start":{"line":45,"column":4},"end":{"line":52,"column":7}},"tags":["statement","line"],"count":5},{"id":26,"loc":{"start":{"line":45,"column":20},"end":{"line":52,"column":5}},"tags":["function"],"name":"@45:20","count":25},{"id":27,"loc":{"start":{"line":46,"column":18},"end":{"line":49,"column":7}},"tags":["branch","line","if"],"group":"46:6","count":24},{"id":28,"loc":{"start":{"line":49,"column":13},"end":{"line":51,"column":7}},"tags":["branch","line","if"],"group":"46:6","count":1},{"id":29,"loc":{"start":{"line":47,"column":32},"end":{"line":47,"column":47}},"tags":["statement","variable","line"],"count":24},{"id":30,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":39}},"tags":["statement","line"],"count":24},{"id":31,"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":24}},"tags":["statement","line"],"count":1},{"id":32,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":20}},"tags":["statement","line"],"count":5},{"id":33,"loc":{"start":{"line":56,"column":15},"end":{"line":56,"column":17}},"tags":["statement","variable","line"],"count":1},{"id":34,"loc":{"start":{"line":57,"column":2},"end":{"line":69,"column":5}},"tags":["statement","line"],"count":1},{"id":35,"loc":{"start":{"line":57,"column":28},"end":{"line":69,"column":3}},"tags":["function"],"name":"@57:28","count":1},{"id":36,"loc":{"start":{"line":58,"column":21},"end":{"line":58,"column":31}},"tags":["statement","variable","line"],"count":1},{"id":37,"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":43}},"tags":["statement","variable","line"],"count":1},{"id":38,"loc":{"start":{"line":60,"column":14},"end":{"line":60,"column":39}},"tags":["statement","variable","line"],"count":0},{"id":39,"loc":{"start":{"line":61,"column":4},"end":{"line":61,"column":26}},"tags":["statement","line"],"count":0},{"id":40,"loc":{"start":{"line":62,"column":4},"end":{"line":68,"column":7}},"tags":["statement","line"],"count":0},{"id":41,"loc":{"start":{"line":62,"column":14},"end":{"line":68,"column":5}},"tags":["function"],"name":"@62:14","count":0},{"id":42,"loc":{"start":{"line":63,"column":18},"end":{"line":65,"column":7}},"tags":["branch","line","if"],"group":"63:6","count":0},{"id":43,"loc":{"start":{"line":65,"column":13},"end":{"line":67,"column":7}},"tags":["branch","line","if"],"group":"63:6","count":0},{"id":44,"loc":{"start":{"line":64,"column":8},"end":{"line":64,"column":37}},"tags":["statement","line"],"count":0},{"id":45,"loc":{"start":{"line":66,"column":8},"end":{"line":66,"column":50}},"tags":["statement","line"],"count":0},{"id":46,"loc":{"start":{"line":71,"column":9},"end":{"line":74,"column":14}},"tags":["line","statement"],"count":0},{"id":47,"loc":{"start":{"line":72,"column":4},"end":{"line":72,"column":20}},"tags":["line"],"count":0},{"id":48,"loc":{"start":{"line":73,"column":4},"end":{"line":73,"column":10},"identifierName":"result"},"tags":["line"],"count":0}]}}